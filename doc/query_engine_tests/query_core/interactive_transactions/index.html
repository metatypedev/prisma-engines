<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `interactive_transactions` mod in crate `query_engine_tests`."><meta name="keywords" content="rust, rustlang, rust-lang, interactive_transactions"><title>query_engine_tests::query_core::interactive_transactions - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../query_engine_tests/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../query_engine_tests/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module interactive_transactions</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../query_engine_tests/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../../index.html">query_engine_tests</a>::<wbr><a href="../index.html">query_core</a>::<wbr><a class="mod" href="#">interactive_transactions</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/query_core/lib.rs.html#27">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ITXClient.html" title="query_engine_tests::query_core::interactive_transactions::ITXClient struct">ITXClient</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ITXServer.html" title="query_engine_tests::query_core::interactive_transactions::ITXServer struct">ITXServer</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OpenTx.html" title="query_engine_tests::query_core::interactive_transactions::OpenTx struct">OpenTx</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TransactionActorManager.html" title="query_engine_tests::query_core::interactive_transactions::TransactionActorManager struct">TransactionActorManager</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxId.html" title="query_engine_tests::query_core::interactive_transactions::TxId struct">TxId</a></div><div class="item-right docblock-short"><p>How Interactive Transactions work
The Interactive Transactions (iTx) follow an actor model design. Where each iTx is created in its own process.
When a prisma client requests to start a new transaction, the Transaction Actor Manager spawns a new ITXServer. The ITXServer runs in its own
process and waits for messages to arrive via its receive channel to process.
The Transaction Actor Manager will also create an ITXClient and add it to hashmap managed by an RwLock. The ITXClient is the only way to communicate
with the ITXServer.
Once the prisma client receives the iTx Id it can perform database operations using that iTx id. When an operation request is received by the
TransactionActorManager, it looks for the client in the hashmap and passes the operation to the client. The ITXClient sends a message to the
ITXServer and waits for a response. The ITXServer will then perform the operation and return the result. The ITXServer will perform one
operation at a time. All other operations will sit in the message queue waiting to be processed.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxOpRequest.html" title="query_engine_tests::query_core::interactive_transactions::TxOpRequest struct">TxOpRequest</a></div><div class="item-right docblock-short"></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CachedTx.html" title="query_engine_tests::query_core::interactive_transactions::CachedTx enum">CachedTx</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TransactionError.html" title="query_engine_tests::query_core::interactive_transactions::TransactionError enum">TransactionError</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TxOpRequestMsg.html" title="query_engine_tests::query_core::interactive_transactions::TxOpRequestMsg enum">TxOpRequestMsg</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TxOpResponse.html" title="query_engine_tests::query_core::interactive_transactions::TxOpResponse enum">TxOpResponse</a></div><div class="item-right docblock-short"></div></div></div><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="static" href="static.CLOSED_TX_CACHE_SIZE.html" title="query_engine_tests::query_core::interactive_transactions::CLOSED_TX_CACHE_SIZE static">CLOSED_TX_CACHE_SIZE</a></div><div class="item-right docblock-short"></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.spawn_client_list_clear_actor.html" title="query_engine_tests::query_core::interactive_transactions::spawn_client_list_clear_actor fn">spawn_client_list_clear_actor</a></div><div class="item-right docblock-short"><p>Spawn the client list clear actor
It waits for messages from completed ITXServers and removes
the ITXClient from the clients hashmap</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.spawn_itx_actor.html" title="query_engine_tests::query_core::interactive_transactions::spawn_itx_actor fn">spawn_itx_actor</a></div><div class="item-right docblock-short"></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="query_engine_tests" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>